/**
 * Generates a complete svg image from a PuzzleData object
 * 
 * @param {PuzzleData} puzzleData 
 */
export function getPuzzleSvg(tempshape,temphex, startquest){

    
    const textSize = 21
    const textWeigth = 'normal'

    let shapeSVG = createShape(tempshape, "#FFFFFF")
    if(startquest==1){
        shapeSVG = createShape(tempshape, temphex)
    }
    //const topText = createText(puzzleData.text[0].toUpperCase(), puzzleData.colors['colortext'], textSize, textWeigth, 31)
    //const bottomText = createText(puzzleData.text[1].toUpperCase(), puzzleData.colors['shapetext'], textSize, textWeigth, 67)
    //const numberText = createText(puzzleData.number, puzzleData.colors['number'], 60, 100, 50, 'Arial, Helvetica')

    return createSVG([shapeSVG])
}

// Takes multiple SVG strings and combines them to a svg
const createSVG = (elements) => `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"> ${elements.join("\n")} </svg>`

const createShape = (shape, color) => SHAPE_SVG[shape](color)

const SHAPE_SVG = {
    'square' : (c) => `<rect fill=${c} stroke="#000" stroke-width="1" width="150" height="150"/>`, 
    'triangle': (c) => `<polygon  fill=${c}  stroke="#000" stroke-width="1" points="0 150 75 0 150 150 0 150"/>`, 
    'rectangle' : (c) =>`<rect y="30" fill=${c}  stroke="#000" stroke-width="1" class="shape" width="150" height="90"/>`, 
    'circle' : (c) => `<circle fill=${c}  stroke="#000" stroke-width="1" cx="75" cy="75" r="75"/>`,
    'turnonoff' : (c) => `<path fill=${c} d="M 75 146.777344 C 37.03125 146.777344 6.152344 116.835938 6.152344 80.039062 C 6.152344 54.316406 20.976562 31.316406 44.851562 20.007812 C 47.839844 18.601562 51.414062 19.863281 52.820312 22.851562 C 54.226562 25.839844 52.96875 29.414062 49.980469 30.820312 C 30.320312 40.136719 18.132812 58.972656 18.132812 80.039062 C 18.132812 110.242188 43.652344 134.824219 75 134.824219 C 106.347656 134.824219 131.867188 110.242188 131.867188 80.039062 C 131.867188 58.828125 118.976562 39.34375 98.996094 30.378906 C 95.976562 29.03125 94.628906 25.488281 95.976562 22.46875 C 97.324219 19.453125 100.867188 18.105469 103.886719 19.480469 C 128.171875 30.351562 143.847656 54.140625 143.847656 80.039062 C 143.847656 116.835938 112.96875 146.777344 75 146.777344 Z M 75 146.777344 "/>
    <path fill=${c} d="M 75 84.34375 C 71.6875 84.34375 69.023438 81.679688 69.023438 78.367188 L 69.023438 9.199219 C 69.023438 5.890625 71.71875 3.222656 75 3.222656 C 78.3125 3.222656 80.976562 5.890625 80.976562 9.199219 L 80.976562 78.367188 C 80.976562 81.679688 78.308594 84.34375 75 84.34375 Z M 75 84.34375 "/>`,
    
    'harddrive' : (c) => `<path fill=${c} d="M 121.875 9.375 L 28.125 9.375 L 2.8125 84.375 L 147.1875 84.375 Z M 121.875 9.375 "/>
    <path fill=${c} d="M 0 93.75 L 0 140.625 L 150 140.625 L 150 93.75 Z M 28.125 121.875 L 18.75 121.875 L 18.75 112.5 L 28.125 112.5 Z M 65.625 121.875 L 37.5 121.875 L 37.5 112.5 L 65.625 112.5 Z M 65.625 121.875 "/>
    `,

    'network' : (c) => `<path fill=${c} d="M 150 76.875 L 150 73.125 C 150 71.054688 148.320312 69.375 146.25 69.375 L 80.625 69.375 L 80.625 60 L 97.5 60 C 101.640625 60 105 56.640625 105 52.5 L 105 22.5 C 105 18.359375 101.640625 15 97.5 15 L 52.5 15 C 48.359375 15 45 18.359375 45 22.5 L 45 52.5 C 45 56.640625 48.359375 60 52.5 60 L 69.375 60 L 69.375 69.375 L 3.75 69.375 C 1.679688 69.375 0 71.054688 0 73.125 L 0 76.875 C 0 78.945312 1.679688 80.625 3.75 80.625 L 28.125 80.625 L 28.125 90 L 15 90 C 10.859375 90 7.5 93.359375 7.5 97.5 L 7.5 127.5 C 7.5 131.640625 10.859375 135 15 135 L 52.5 135 C 56.640625 135 60 131.640625 60 127.5 L 60 97.5 C 60 93.359375 56.640625 90 52.5 90 L 39.375 90 L 39.375 80.625 L 110.625 80.625 L 110.625 90 L 97.5 90 C 93.359375 90 90 93.359375 90 97.5 L 90 127.5 C 90 131.640625 93.359375 135 97.5 135 L 135 135 C 139.140625 135 142.5 131.640625 142.5 127.5 L 142.5 97.5 C 142.5 93.359375 139.140625 90 135 90 L 121.875 90 L 121.875 80.625 L 146.25 80.625 C 148.320312 80.625 150 78.945312 150 76.875 Z M 60 45 L 60 30 L 90 30 L 90 45 Z M 45 120 L 22.5 120 L 22.5 105 L 45 105 Z M 127.5 120 L 105 120 L 105 105 L 127.5 105 Z M 127.5 120 "/>`,
    'download' : (c) => `<path fill=${c} d="M 63.28125 0 L 86.71875 0 C 90.617188 0 93.75 3.132812 93.75 7.03125 L 93.75 56.25 L 119.445312 56.25 C 124.65625 56.25 127.265625 62.546875 123.574219 66.242188 L 79.015625 110.828125 C 76.816406 113.027344 73.210938 113.027344 71.015625 110.828125 L 26.398438 66.242188 C 22.703125 62.546875 25.3125 56.25 30.527344 56.25 L 56.25 56.25 L 56.25 7.03125 C 56.25 3.132812 59.382812 0 63.28125 0 Z M 150 110.15625 L 150 142.96875 C 150 146.867188 146.867188 150 142.96875 150 L 7.03125 150 C 3.132812 150 0 146.867188 0 142.96875 L 0 110.15625 C 0 106.257812 3.132812 103.125 7.03125 103.125 L 50.007812 103.125 L 64.367188 117.480469 C 70.253906 123.367188 79.746094 123.367188 85.632812 117.480469 L 99.988281 103.125 L 142.96875 103.125 C 146.867188 103.125 150 106.257812 150 110.15625 Z M 113.671875 135.9375 C 113.671875 132.714844 111.035156 130.078125 107.8125 130.078125 C 104.589844 130.078125 101.953125 132.714844 101.953125 135.9375 C 101.953125 139.160156 104.589844 141.796875 107.8125 141.796875 C 111.035156 141.796875 113.671875 139.160156 113.671875 135.9375 Z M 132.421875 135.9375 C 132.421875 132.714844 129.785156 130.078125 126.5625 130.078125 C 123.339844 130.078125 120.703125 132.714844 120.703125 135.9375 C 120.703125 139.160156 123.339844 141.796875 126.5625 141.796875 C 129.785156 141.796875 132.421875 139.160156 132.421875 135.9375 Z M 132.421875 135.9375 "/>
    `,
    'servers' : (c) => `<path fill=${c} d="M 119.949219 114.21875 C 106.054688 120.117188 89.472656 123.355469 75 123.355469 C 60.527344 123.355469 43.984375 120.042969 30.046875 114.21875 C 16.109375 108.394531 14.0625 103.464844 14.0625 103.464844 L 14.0625 114.65625 C 14.0625 123.78125 19.335938 127.441406 33.785156 133.507812 C 44.863281 138.160156 59.523438 140.625 75 140.625 C 90.476562 140.625 105.136719 138.160156 116.214844 133.507812 C 130.664062 127.441406 135.9375 123.78125 135.9375 114.65625 L 135.9375 103.464844 C 135.9375 103.464844 133.84375 108.324219 119.949219 114.21875 Z M 119.949219 114.21875 "/>
    <path fill=${c} d="M 18.660156 50.75 C 21.949219 53.632812 26.808594 56.457031 32.722656 58.925781 C 45.167969 64.132812 60.976562 67.238281 75.015625 67.238281 C 89.050781 67.238281 104.863281 64.132812 117.308594 58.925781 C 123.203125 56.457031 128.066406 53.632812 131.355469 50.75 C 133.132812 49.191406 134.535156 47.78125 135.300781 46.984375 C 135.71875 46.546875 135.953125 45.964844 135.953125 45.359375 L 135.953125 37.695312 C 135.707031 29.261719 128.714844 21.757812 116.261719 16.5625 C 105.125 11.925781 90.480469 9.375 75 9.375 C 59.519531 9.375 44.875 11.925781 33.765625 16.5625 C 21.34375 21.742188 14.355469 29.234375 14.078125 37.648438 L 14.078125 45.359375 C 14.074219 45.964844 14.308594 46.546875 14.726562 46.984375 C 15.480469 47.78125 16.882812 49.191406 18.660156 50.75 Z M 18.660156 50.75 "/>
    <path fill=${c} d="M 119.949219 65.011719 C 106.933594 70.605469 89.472656 74.148438 75 74.148438 C 60.527344 74.148438 43.105469 70.554688 30.050781 65.011719 C 16.996094 59.472656 14.0625 54.257812 14.0625 54.257812 L 14.0625 68.132812 C 14.085938 70.335938 15.671875 72.878906 18.660156 75.496094 C 21.953125 78.378906 26.808594 81.207031 32.722656 83.675781 C 45.152344 88.882812 60.964844 91.992188 75 91.992188 C 89.035156 91.992188 104.847656 88.886719 117.292969 83.679688 C 123.191406 81.214844 128.050781 78.382812 131.339844 75.5 C 134.34375 72.863281 135.933594 70.3125 135.9375 68.097656 L 135.9375 54.257812 C 135.9375 54.257812 132.96875 59.421875 119.949219 65.011719 Z M 119.949219 65.011719 "/>
    <path fill=${c} d="M 119.949219 89.757812 C 106.054688 95.507812 89.472656 98.894531 75 98.894531 C 60.527344 98.894531 42.8125 95.144531 30.050781 89.757812 C 17.289062 84.375 14.0625 79.003906 14.0625 79.003906 L 14.0625 92.554688 C 14.0625 94.765625 15.65625 97.324219 18.660156 99.953125 C 21.949219 102.835938 26.804688 105.667969 32.722656 108.132812 C 45.167969 113.339844 60.976562 116.445312 75.015625 116.445312 C 89.054688 116.445312 104.863281 113.339844 117.308594 108.132812 C 123.203125 105.664062 128.066406 102.839844 131.355469 99.953125 C 134.339844 97.339844 135.929688 94.796875 135.953125 92.59375 L 135.953125 79.003906 C 135.953125 79.003906 133.847656 84.011719 119.949219 89.757812 Z M 119.949219 89.757812 "/>
    `,
    'threeservers' : (c) => `<path fill=${c} d="M 0 15 C 0 6.75 6.75 0 15 0 L 135 0 C 143.285156 0 150 6.714844 150 15 L 150 30 C 150 38.285156 143.285156 45 135 45 L 15 45 C 6.714844 45 0 38.285156 0 30 Z M 0 67.5 C 0 59.25 6.75 52.5 15 52.5 L 135 52.5 C 143.285156 52.5 150 59.214844 150 67.5 L 150 82.5 C 150 90.785156 143.285156 97.5 135 97.5 L 15 97.5 C 6.714844 97.5 0 90.785156 0 82.5 Z M 0 120 C 0 111.75 6.75 105 15 105 L 135 105 C 143.285156 105 150 111.714844 150 120 L 150 135 C 150 143.285156 143.285156 150 135 150 L 15 150 C 6.714844 150 0 143.285156 0 135 Z M 90 15 L 90 30 L 105 30 L 105 15 Z M 120 15 L 120 30 L 135 30 L 135 15 Z M 90 67.5 L 90 82.5 L 105 82.5 L 105 67.5 Z M 120 67.5 L 120 82.5 L 135 82.5 L 135 67.5 Z M 90 120 L 90 135 L 105 135 L 105 120 Z M 120 120 L 120 135 L 135 135 L 135 120 Z M 120 120 "/>
    `,
    
}

//'turnonoff' : (c) => `<path fill=${c}  <path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 75 146.777344 C 37.03125 146.777344 6.152344 116.835938 6.152344 80.039062 C 6.152344 54.316406 20.976562 31.316406 44.851562 20.007812 C 47.839844 18.601562 51.414062 19.863281 52.820312 22.851562 C 54.226562 25.839844 52.96875 29.414062 49.980469 30.820312 C 30.320312 40.136719 18.132812 58.972656 18.132812 80.039062 C 18.132812 110.242188 43.652344 134.824219 75 134.824219 C 106.347656 134.824219 131.867188 110.242188 131.867188 80.039062 C 131.867188 58.828125 118.976562 39.34375 98.996094 30.378906 C 95.976562 29.03125 94.628906 25.488281 95.976562 22.46875 C 97.324219 19.453125 100.867188 18.105469 103.886719 19.480469 C 128.171875 30.351562 143.847656 54.140625 143.847656 80.039062 C 143.847656 116.835938 112.96875 146.777344 75 146.777344 Z M 75 146.777344 "/>
//<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 75 84.34375 C 71.6875 84.34375 69.023438 81.679688 69.023438 78.367188 L 69.023438 9.199219 C 69.023438 5.890625 71.71875 3.222656 75 3.222656 C 78.3125 3.222656 80.976562 5.890625 80.976562 9.199219 L 80.976562 78.367188 C 80.976562 81.679688 78.308594 84.34375 75 84.34375 Z M 75 84.34375 "/>`,
    

const createText = (text, color, size, weight, y, font) => `
    <text 
        stroke="black" 
        fill="${color}" 
        stroke-width="1" 
        style="font-size:${size}px;" 
        font-weight="${weight}" 
        font-family="${font || 'Archivo Black'}, sans-serif";
        x="50%" 
        y="${y}%" 
        dominant-baseline="middle" 
        text-anchor="middle"
    >
        ${text}
    </text> `
